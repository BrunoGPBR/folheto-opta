<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Folheto Opta - Interativo + Leitor HD</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="stpageflip.min.css" />
  <style>
    /* Fundo preto e texto branco para contraste */
    body {
      margin: 0;
      background: #000;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #fff;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    #flipbook {
      width: 100vw;
      height: 100vh;
    }

    /* Cores base laranja do folder */
    :root {
      --main-orange: #ff6a00;
      --main-orange-light: #ff944d;
      --main-orange-shadow: rgba(255, 106, 0, 0.5);
      --main-orange-dark: #cc5600;
    }

    /* Botão fullscreen estilizado */
    #fullscreenBtn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--main-orange);
      border: none;
      padding: 12px 18px;
      font-size: 14px;
      border-radius: 30px;
      cursor: pointer;
      z-index: 10;
      transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1), transform 0.25s ease;
      outline-offset: 2px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: white;
      font-weight: 600;
      user-select: none;
      box-shadow: 0 4px 15px var(--main-orange-shadow);
    }

    #fullscreenBtn:hover,
    #fullscreenBtn:focus {
      background: var(--main-orange-dark);
      transform: scale(1.07);
      outline: 3px solid var(--main-orange-light);
      box-shadow: 0 6px 20px var(--main-orange-shadow);
    }

    #fullscreenBtn svg {
      fill: white;
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      transition: fill 0.35s ease;
    }

    /* Tela cheia */
    #fullscreenViewer {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      animation: fadeIn 0.3s ease-in-out;
      padding: 20px;
      box-sizing: border-box;
    }

    #fullscreenViewer img {
      max-width: 90%;
      max-height: 85%;
      box-shadow:
        0 0 30px var(--main-orange),
        inset 0 0 20px var(--main-orange-light);
      border-radius: 12px;
      transition: opacity 0.4s ease, box-shadow 0.4s ease;
      user-select: none;
      background: #111;
    }

    /* Botões navegação e fechar estilizados */
    .nav-btn, .close-btn {
      background: none;
      border: none;
      cursor: pointer;
      outline-offset: 2px;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.35s ease, box-shadow 0.3s ease;
      color: var(--main-orange);
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      padding: 10px;
      border-radius: 50%;
      box-shadow: 0 0 15px var(--main-orange-shadow);
      font-weight: 600;
      will-change: transform;
    }

    .nav-btn svg, .close-btn svg {
      fill: var(--main-orange);
      width: 30px;
      height: 30px;
      pointer-events: none;
      transition: fill 0.35s ease;
    }

    .nav-btn:hover,
    .nav-btn:focus {
      color: var(--main-orange-light);
      box-shadow: 0 0 28px var(--main-orange-light);
      transform: scale(1.2);
    }

    .nav-btn:disabled {
      color: #444;
      box-shadow: none;
      cursor: default;
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      width: 42px;
      height: 42px;
      color: var(--main-orange);
      box-shadow: 0 0 20px var(--main-orange-shadow);
      will-change: transform;
    }

    .close-btn:hover,
    .close-btn:focus {
      color: var(--main-orange-light);
      box-shadow: 0 0 35px var(--main-orange-light);
      transform: scale(1.3);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.97); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      #fullscreenBtn {
        padding: 10px 14px;
        font-size: 13px;
      }
      .nav-btn, .close-btn {
        width: 38px;
        height: 38px;
      }
      #fullscreenViewer img {
        max-width: 95%;
        max-height: 70%;
        box-shadow:
          0 0 20px var(--main-orange),
          inset 0 0 14px var(--main-orange-light);
      }
      .nav-btn svg, .close-btn svg {
        width: 24px;
        height: 24px;
      }
    }
  </style>
</head>
<body>

<button id="fullscreenBtn" aria-label="Ver folheto em alta qualidade no modo tela cheia" title="Ver em Alta Qualidade" type="button">
  <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
    <path d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 001.48-5.34C15.39 5.61 13.28 3.5 10.5 3.5S5.61 5.61 5.61 8.39 7.72 13.28 10.5 13.28a6.471 6.471 0 005.34-1.48l.27.28v.79l4.25 4.25c.4.4 1.04.4 1.44 0s.4-1.05 0-1.45L15.5 14zm-5 0C9.01 14 7 11.99 7 9.5S9.01 5 11.5 5 16 7.01 16 9.5 13.99 14 11.5 14z"/>
  </svg>
  Ver em Alta Qualidade
</button>

<main>
  <section aria-label="Folheto digital interativo">
    <div id="flipbook" role="region" aria-live="polite" aria-label="Folheto interativo com páginas viráveis"></div>
  </section>
</main>

<div id="fullscreenViewer" role="dialog" aria-modal="true" aria-labelledby="fullscreenTitle" tabindex="-1">
  <button class="close-btn" onclick="closeFullscreen()" aria-label="Fechar visualizador em tela cheia" title="Fechar" type="button" >
    <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M18.3 5.71a1 1 0 00-1.41 0L12 10.59 7.11 5.7a1 1 0 00-1.41 1.42L10.59 12l-4.89 4.89a1 1 0 001.41 1.41L12 13.41l4.89 4.89a1 1 0 001.41-1.41L13.41 12l4.89-4.89a1 1 0 000-1.4z"/>
    </svg>
  </button>
  <img id="viewerImage" src="" alt="Página ampliada do folheto" onerror="imageLoadError()" />
  <div>
    <button class="nav-btn" onclick="prevImage()" aria-label="Página anterior" title="Página Anterior" type="button" >
      <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
    </button>
    <button class="nav-btn" onclick="nextImage()" aria-label="Próxima página" title="Próxima" type="button" >
      <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
        <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
      </svg>
    </button>
  </div>
</div>

<script src="stpageflip.min.js"></script>
<script>
  // Imagens para o modo fullscreen (sem a página branca final)
  const fullscreenImages = [
    "https://i.imgur.com/uH4uk5l.jpeg",
    "https://i.imgur.com/aoCOVms.jpeg",
    "https://i.imgur.com/VWWJ1z5.jpeg",
    "https://i.imgur.com/JVglSjP.jpeg"
  ];

  let currentImage = 0;

  function openFullscreen() {
    const viewer = document.getElementById("fullscreenViewer");
    viewer.style.display = "flex";
    viewer.focus();
    updateImage();
  }

  function closeFullscreen() {
    const viewer = document.getElementById("fullscreenViewer");
    viewer.style.display = "none";
  }

  function updateImage() {
    const img = document.getElementById("viewerImage");
    img.src = fullscreenImages[currentImage];
    img.alt = `Página ${currentImage + 1} ampliada do folheto`;
    img.onerror = imageLoadError;
    updateNavButtons();
  }

  function imageLoadError() {
    const img = document.getElementById("viewerImage");
    img.alt = "Erro ao carregar a imagem.";
    img.src = "https://via.placeholder.com/800x1120?text=Imagem+indisponível";
  }

  function nextImage() {
    if (currentImage < fullscreenImages.length - 1) {
      currentImage++;
      updateImage();
    }
  }

  function prevImage() {
    if (currentImage > 0) {
      currentImage--;
      updateImage();
    }
  }

  // Desabilitar botões navegação nas extremidades
  function updateNavButtons() {
    const prevBtn = document.querySelector('.nav-btn[onclick="prevImage()"]');
    const nextBtn = document.querySelector('.nav-btn[onclick="nextImage()"]');
    prevBtn.disabled = currentImage === 0;
    nextBtn.disabled = currentImage === fullscreenImages.length - 1;
  }

  // Navegação com teclado para acessibilidade
  document.addEventListener("keydown", function(e) {
    const viewer = document.getElementById("fullscreenViewer");
    if (viewer.style.display === "flex") {
      if (e.key === "ArrowRight") {
        nextImage();
      } else if (e.key === "ArrowLeft") {
        prevImage();
      } else if (e.key === "Escape") {
        closeFullscreen();
      }
    }
  });

  document.getElementById("fullscreenBtn").addEventListener("click", openFullscreen);

  // Inicializa StPageFlip padrão
  document.addEventListener("DOMContentLoaded", () => {
    const pageFlip = new St.PageFlip(document.getElementById("flipbook"), {
      width: 800,
      height: 1120,
      size: "stretch",
      usePortrait: window.innerWidth < 768,
      minWidth: 315,
      maxWidth: 1600,
      minHeight: 400,
      maxHeight: 2400,
      drawShadow: true,
      flippingTime: 800,
      startPage: 0,
      autoSize: true,
      maxShadowOpacity: 0.4,
      showCover: true,
      mobileScrollSupport: true
    });

    pageFlip.loadFromImages([
      "https://i.imgur.com/uH4uk5l.jpeg",
      "https://i.imgur.com/aoCOVms.jpeg",
      "https://i.imgur.com/VWWJ1z5.jpeg",
      "https://i.imgur.com/JVglSjP.jpeg",
      "https://i.imgur.com/Gf6qv4V.jpeg" // Essa imagem permanece no flipbook
    ]);

    pageFlip.on("flip", (e) => {
      const total = pageFlip.getPageCount();
      if (e.data === 0) {
        pageFlip.updateState({ disableFlip: "backward" });
      } else if (e.data === total - 1) {
        pageFlip.updateState({ disableFlip: "forward" });
      } else {
        pageFlip.updateState({ disableFlip: false });
      }
    });
  });
</script>

</body>
</html>
